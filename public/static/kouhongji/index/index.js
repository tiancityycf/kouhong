var o = new Vue({
    el: '#vm',
    data: {
        goods:[],
        musicOn:true,
        loadShow:true,
        tkShow:false,
        ruleShow:false,
        balanceShow:false,
        topTit:"",
        ruleList:[]
    },
    created:function(){
        this.loadIndex();
    },
    methods:{
        loadIndex:function(){
            $.ajax({  
                type:"POST",
                url:"http://khj.local.com/h5khj/api/v1_0_1/good/index.html",
                data:{
                    user_id:user_id
                },
                success:function(res){
                    o.topTit=res.data.notice.title;
                    o.ruleList =res.data.rules;
                    for(let i=0;i<res.data.good_info.length;i++){
                        res.data.good_info[i].price=parseInt(res.data.good_info[i].price);
                        res.data.good_info[i].sale_price=parseInt(res.data.good_info[i].sale_price);
                    }
                    o.goods=res.data.good_info;
                    o.loadShow=false;
                    $("#bgMusic")[0].play();
                }
            })
        },
        startGame:function(e){
            $.ajax({  
                type:"POST",
                url:"http://khj.local.com/h5khj/api/v1_0_1/game/start.html",
                data:{
                    user_id:user_id,
                    goods_id:e
                },
                success:function(res){
                    if(res.data.status==1){

                    }else{
                        o.ruleShow=true;
                        o.balanceShow=true;
                    }
                }
            })
        },
        payMoney:function(){

        },
        musicSet:function(){
            o.musicOn=!o.musicOn;
            if(!o.musicOn){
                $("#bgMusic")[0].pause();
            }else{
                $("#bgMusic")[0].play();
            }
        },
        openRule:function(){
            o.ruleShow=true;
            o.tkShow=true;
        },
        closeTk:function(){
            o.ruleShow=false;
            o.tkShow=false;
            o.balanceShow=false;
        },
        goUser:function(){
            location.href="../user/user.html"
        }
    }
})    
